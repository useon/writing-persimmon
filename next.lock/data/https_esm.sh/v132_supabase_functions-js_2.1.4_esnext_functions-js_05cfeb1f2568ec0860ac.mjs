/* esm.sh - esbuild bundle(@supabase/functions-js@2.1.4) esnext production */
var v=function(c,t,e,r){function f(s){return s instanceof e?s:new e(function(n){n(s)})}return new(e||(e=Promise))(function(s,n){function u(o){try{i(r.next(o))}catch(a){n(a)}}function l(o){try{i(r.throw(o))}catch(a){n(a)}}function i(o){o.done?s(o.value):f(o.value).then(u,l)}i((r=r.apply(c,t||[])).next())})},w=c=>{let t;return c?t=c:typeof fetch>"u"?t=(...e)=>v(void 0,void 0,void 0,function*(){return yield(yield import("/v132/cross-fetch@3.1.8/esnext/cross-fetch.mjs")).fetch(...e)}):t=fetch,(...e)=>t(...e)};var d=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},h=class extends d{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},y=class extends d{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},x=class extends d{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var E=function(c,t,e,r){function f(s){return s instanceof e?s:new e(function(n){n(s)})}return new(e||(e=Promise))(function(s,n){function u(o){try{i(r.next(o))}catch(a){n(a)}}function l(o){try{i(r.throw(o))}catch(a){n(a)}}function i(o){o.done?s(o.value):f(o.value).then(u,l)}i((r=r.apply(c,t||[])).next())})},m=class{constructor(t,{headers:e={},customFetch:r}={}){this.url=t,this.headers=e,this.fetch=w(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return E(this,void 0,void 0,function*(){try{let{headers:f,method:s,body:n}=e,u={},l;n&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)&&(typeof Blob<"u"&&n instanceof Blob||n instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",l=n):typeof n=="string"?(u["Content-Type"]="text/plain",l=n):typeof FormData<"u"&&n instanceof FormData?l=n:(u["Content-Type"]="application/json",l=JSON.stringify(n)));let i=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),f),body:l}).catch(F=>{throw new h(F)}),o=i.headers.get("x-relay-error");if(o&&o==="true")throw new y(i);if(!i.ok)throw new x(i);let a=((r=i.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return a==="application/json"?p=yield i.json():a==="application/octet-stream"?p=yield i.blob():a==="multipart/form-data"?p=yield i.formData():p=yield i.text(),{data:p,error:null}}catch(f){return{data:null,error:f}}})}};export{m as FunctionsClient,d as FunctionsError,h as FunctionsFetchError,x as FunctionsHttpError,y as FunctionsRelayError};
//# sourceMappingURL=functions-js.mjs.map